#!/bin/bash
# normalize way to add user to group on macos
adduser()
{
  if [ -z "$1" ]
   then
     echo "-Missing parameter #1.-"
   else
     echo "-Parameter #1 is \"$1\".-"
   fi
  if [ -z "$2" ]
   then
     echo "-Missing parameter #2.-"
   else
     echo "-Parameter #2 is \"$2\".-"
     sudo dseditgroup -o edit -a $1 -t user $2
   fi
}
alias sites='cd ~/Sites'
alias bump='git commit -am "Update changelog and bump versions"'
alias sync1='git checkout develop && git push origin develop && git push pantheon develop && git checkout master && git push origin master && git push pantheon master'
alias sync2='git checkout develop && git push origin develop && git checkout master && git push origin master && git push live master'
alias sync3='git checkout develop && git push origin develop && git push acquia develop && git checkout master && git push origin master && git push acquia master'
alias branch-name='git rev-parse --abbrev-ref HEAD'
alias homevpn='sudo openvpn --config ~/.openvpn/client3.ovpn --ca ~/.openvpn/ca.crt --cert ~/.openvpn/client.crt --key ~/.openvpn/client.key'
alias docker-kill-all='docker ps --format "{{.ID}}" | xargs docker kill'
alias octal='stat -f %Mp%Lp *'
alias sshkey='cat ~/.ssh/id_rsa.pub | pbcopy'
alias shrug='echo "¯\_(ツ)_/¯" | pbcopy'
alias version='git tag --list | grep "^v" | sort -t. -k 1,1n -k 2,2n -k 3,3n | tail -1'
alias test-tag='git tag --list | grep test | sort -t _ -k 3,3n | tail -1'
alias live-tag='git tag --list | grep live | sort -t _ -k 3,3n | tail -1'
alias increment="perl -pe 's/([0-9]+)\b/0\$1~01234567890/g' | perl -pe 's/0(?!9*~)|([0-9])(?=9*~[0-9]*?\1([0-9]))|~[0-9]*/\$2/g'"
alias pantheon-test-deploy='p=$(test-tag | increment) && git tag $p && git push pantheon $p'
